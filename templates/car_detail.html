<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ car.name }} - è©³ç´°</title>
  <style>
    body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; }
    header { background-color: #333; color: white; padding: 1rem; }
    .container { max-width: 900px; margin: 20px auto; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .car-image { width: 100%; border-radius: 8px; margin-bottom: 20px; }
    .car-main-info { display: flex; justify-content: space-between; align-items: flex-start; }
    .car-title h1 { margin: 0; }
    .car-title p { font-size: 1.5rem; font-weight: bold; color: #d9534f; margin: 10px 0 0; }
    .favorite-btn { display: inline-block; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; }
    .favorite-btn.active { background-color: #f0ad4e; }
    .spec-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    .spec-table th, .spec-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    .spec-table th { background-color: #f8f8f8; width: 120px; }
    .section { margin-bottom: 30px; }
    .section h2 { border-bottom: 2px solid #333; padding-bottom: 10px; }
    .evaluation-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    .evaluation-table th, .evaluation-table td { border: 1px solid #ddd; padding: 12px; }
    .evaluation-table th { background-color: #f8f8f8; }
    .score-bar-container { background-color: #e9ecef; border-radius: 5px; }
    .score-bar { height: 20px; background-color: #007bff; border-radius: 5px; text-align: right; padding-right: 5px; color: white; line-height: 20px; }
    .prediction-box { background-color: #fef8e7; border: 1px solid #fdf0c5; padding: 15px; margin-top: 15px; border-radius: 5px; }
    .parts-list { list-style: none; padding: 0; }
    .parts-list li { background-color: #e9f5ff; padding: 8px; border-radius: 4px; margin-bottom: 5px; }
  </style>
</head>
<body>

  <header>
    <div style="max-width: 900px; margin: auto; display: flex; justify-content: space-between; align-items: center;">
      <span><a href="{{ url_for('index') }}" style="color: white; text-decoration: none;">ã‚¯ãƒ©ã‚·ãƒƒã‚¯ã‚«ãƒ¼å°‚é–€ã‚µã‚¤ãƒˆ</a></span>
      <a href="{{ url_for('about') }}" style="color: white; text-decoration: none; margin: 0 20px;">å½“ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
      <a href="{{ url_for('index') }}" style="color: white; text-decoration: none;">â† ä¸€è¦§ã«æˆ»ã‚‹</a>
    </div>
  </header>

  <div class="container">
    <div class="car-main-info">
      <div class="car-title">
        <h1>{{ car.name }}</h1>
        <p>{{ car.price }}</p>
      </div>
      <a href="{{ url_for('toggle_favorite', car_id=car.id) }}" 
         class="favorite-btn {% if is_favorite %}active{% endif %}">
        {% if is_favorite %}â˜… ãŠæ°—ã«å…¥ã‚Šè§£é™¤{% else %}â˜† ãŠæ°—ã«å…¥ã‚Šã«ç™»éŒ²{% endif %}
      </a>
    </div>

    <img class="car-image" src="{{ url_for('static', filename=car.image) }}" alt="{{ car.name }}">
    
    <p>{{ car.summary }}</p>

    <table class="spec-table">
      <tr>
        <th>å¹´å¼</th><td>{{ car.year }}</td>
        <th>èµ°è¡Œè·é›¢</th><td>{{ car.mileage }}</td>
      </tr>
      <tr>
        <th>å¤–è£…è©•ä¾¡</th><td>{{ car.evaluation.exterior }} / 10</td>
        <th>å†…è£…è©•ä¾¡</th><td>{{ car.evaluation.interior }} / 10</td>
      </tr>
      <tr>
        <th colspan="2">ç·åˆè©•ä¾¡</th>
        <td colspan="2" style="font-size: 1.2rem; font-weight: bold;">{{ car.evaluation.overall }} / 10</td>
      </tr>
    </table>

    <div class="section">
      <h2>ãƒ¡ã‚«ãƒ‹ãƒƒã‚¯è©•ä¾¡è©³ç´°</h2>
      {% for category_name, items in car.evaluation.parts.items() %}
        <h4>
          {% if category_name == 'suspension_tires' %}ğŸ› è¶³å›ã‚Šãƒ»ã‚¿ã‚¤ãƒ¤ç³»
          {% elif category_name == 'drivetrain' %}ğŸ› ï¸ é§†å‹•ç³»
          {% elif category_name == 'brakes' %}ğŸ”§ ãƒ–ãƒ¬ãƒ¼ã‚­ç³»
          {% elif category_name == 'engine_cooling' %}ğŸ”‹ ã‚¨ãƒ³ã‚¸ãƒ³ãƒ»å†·å´ç³»
          {% elif category_name == 'intake_exhaust_electrical' %}ğŸ”Œ å¸æ’æ°—ãƒ»é›»è£…ç³»
          {% endif %}
        </h4>
        <table class="evaluation-table">
          {% for item in items %}
          <tr>
            <th style="width: 40%;">{{ item.name }}</th>
            <td style="width: 60%;">
              <div class="score-bar-container">
                <!-- â–¼â–¼â–¼ ã“ã“ãŒä¿®æ­£ç®‡æ‰€ã§ã™ â–¼â–¼â–¼ -->
                <div class="score-bar" style="width: {{ item.score * 10 }}%;">{{ item.score }}</div>
                <!-- â–²â–²â–² ã“ã“ãŒä¿®æ­£ç®‡æ‰€ã§ã™ â–²â–²â–² -->
              </div>
            </td>
          </tr>
          {% endfor %}
        </table>
      {% endfor %}
    </div>

    <div class="section">
      <h2>å°†æ¥ã®ä¿®ç†è²»ç”¨äºˆæ¸¬</h2>
      <div class="prediction-box">
        <p><strong>3ãƒ¶æœˆå¾Œ:</strong> {{ car.future_cost_prediction['3_months'] }}</p>
        <p><strong>1å¹´å¾Œ:</strong> {{ car.future_cost_prediction['1_year'] }}</p>
        <p><strong>5å¹´å¾Œ:</strong> {{ car.future_cost_prediction['5_years'] }}</p>
      </div>
    </div>
    
    <div class="section">
      <h2>è£…ç€æ¸ˆã¿ç¤¾å¤–éƒ¨å“</h2>
      <ul class="parts-list">
        {% for part in car.aftermarket_parts %}
          <li>{{ part }}</li>
        {% else %}
          <li>è£…ç€ã•ã‚Œã¦ã„ã‚‹ç¤¾å¤–éƒ¨å“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
        {% endfor %}
      </ul>
    </div>

  </div>

</body>
</html>